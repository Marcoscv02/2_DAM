# **1. Concepto de Thread**

- Un **thread** Unidad m√≠nima de procesamiento que puede ser programada por el sistema operativo.

- **Caracter√≠sticas:**
    - Los hilos permiten ejecutar tareas concurrentes compartiendo el espacio de memoria del proceso, lo cual reduce el uso de recursos.
    - Dentro de un proceso pueden existir m√∫ltiples hilos que comparten:
        - Espacio de memoria.
        - Informaci√≥n de acceso a archivos (stdin, stdout, stderr).
    - Cada hilo mantiene sus propios registros y estado de pila.

![[Pasted image 20250213104752.png]]

# **2. Creaci√≥n de Hilos en Java**

## **2.1. Proceso Principal y Creaci√≥n de Hilos**:

- Al iniciar un programa Java, se ejecuta el m√©todo `main()` con el **hilo principal**.
- Se pueden crear m√°s hilos desde el hilo principal, generando jerarqu√≠as de hilos padres e hijos.

## 2.2. Interfaz Runnable

<aside style="border: 2px solid green; padding: 10px; border-radius: 5px;"> ‚úÖ
<b>`Runnable`</b>: Simple y adecuado para tareas que no requieren devolver un valor.
</aside>

- Implementar la interfaz `Runnable` y sobreescribir el m√©todo `run()`.
    
    Ejemplo con `Runnable`:
    
    ```java
    public class MyRunnable implements Runnable {
    		@Override
        public void run(){
            System.out.println("Hilo en ejecuci√≥n");
        }
    }
    ```
    
- Crear una clase an√≥nima que implemente `Runnable`.
    
- Usar una expresi√≥n Lambda (a partir de Java 8).
    
    Ejemplo con Lambda:
    
    ```java
    Runnable runnable = () -> System.out.println("Hilo con Lambda");
    ```
    

## 2.3. Interfaz Callable

<aside style="border: 2px solid green; padding: 10px; border-radius: 5px;"> ‚úÖ
<b>`Callable`</b>: M√°s avanzado, adecuado para tareas que necesitan devolver un resultado o manejar excepciones.
</aside>

- **`Callable`**: Interfaz que permite crear tareas que pueden devolver un resultado y lanzar excepciones.
    - Tiene el m√©todo `call()` que retorna un objeto.
- **`Future`**:

<aside style="border: 2px solid yellow; padding: 10px; border-radius: 5px;"> üí°
<span style="color:rgb(255, 0, 0)">`FutureTask`</span> en Java permite ejecutar <b>tareas as√≠ncronas</b>, monitorear su progreso, cancelar su ejecuci√≥n si es necesario y obtener su resultado cuando est√© disponible, siendo una herramienta poderosa para la programaci√≥n concurrente y asincr√≥nica en Java.
</aside>

>- m√©todos:
  > 	- `get()`: Obtiene el resultado de la tarea, esperando si a√∫n no ha terminado.
>	- `isDone()`: Indica si la tarea ha finalizado.
>	- `cancel()`: Cancela la ejecuci√≥n de la tarea.

```java
public class GreetCallable implements Callable {
    private String name;

    public GreetCallable(String name) {
        this.name = name;
    }

    @Override
    public Object call() throws Exception {
        String res= "Hello "+name+"!";
        return res;
    }
}
```

# **3. Ciclo de Vida de un Hilo en Java**

- <span style="color:rgb(255, 192, 0)"><b>Nuevo</b></span>: El hilo ha sido creado pero a√∫n no ha comenzado.
- <span style="color:rgb(255, 192, 0)"><b>Runnable</b></span>: El hilo est√° listo para ejecutarse.
-  <span style="color:rgb(255, 192, 0)"><b>Ejecuci√≥n</b></span>: El hilo est√° siendo ejecutado.
-  <span style="color:rgb(255, 192, 0)"><b>Espera</b></span>: El hilo est√° esperando por otro hilo o por un tiempo determinado.
-  <span style="color:rgb(255, 192, 0)"><b>Terminado</b></span>: El hilo ha completado su tarea.

![[Pasted image 20250213104817.png|550]]

# **4. Gesti√≥n de la Ejecuci√≥n de Hilos**

- **Prioridad de Hilos**: Los hilos en Java tienen prioridades entre 1 (m√≠nima) y 10 (m√°xima). El planificador del sistema operativo decide cu√°l hilo ejecutar bas√°ndose en la prioridad.
    
    - La prioridar predeterminada por defecto es 5(intermedio)
- **M√©todos clave de `Thread`**:

| **M√©todo**                    | **Descripci√≥n**                                                                                                                                                                                   |
| ----------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `start()`                     | Hace que un nuevo hilo ejecute el c√≥digo del m√©todo `run()`.                                                                                                                                      |
| `boolean isAlive()`           | Verifica si un hilo est√° activo o no.                                                                                                                                                             |
| `sleep(long ms)`              | Cambia el estado del hilo a bloqueado durante los milisegundos especificados.                                                                                                                     |
| `run()`                       | Es el c√≥digo que ejecuta el hilo. Es llamado por el m√©todo `start()`. Representa el ciclo de vida de un hilo.                                                                                     |
| `String toString()`           | Devuelve una representaci√≥n legible del hilo (nombre, prioridad, grupo).                                                                                                                          |
| `long getId()`                | Devuelve el identificador del hilo (un id asignado por el proceso).                                                                                                                               |
| `void yield()`                | Hace que el hilo deje de ejecutarse moment√°neamente, volviendo a la cola y permitiendo que otros hilos se ejecuten.                                                                               |
| `void join()`                 | Es llamado desde otro hilo y hace que el hilo que lo invoca se bloquee hasta que el hilo termine. Es similar a `waitFor()` en los procesos.                                                       |
| `String getName()`            | Es llamado desde otro hilo y hace que el hilo que lo invoca se bloquee hasta que el hilo termine. Es similar a `waitFor()` en los procesos.                                                       |
| `String setName(String name)` | Cambia el nombre del hilo.                                                                                                                                                                        |
| `int getPriority()`           | Obtiene la prioridad del hilo.                                                                                                                                                                    |
| `setPriority(int p)`          | Modifica la prioridad del hilo.                                                                                                                                                                   |
| `void interrupt()`            | Interrumpe la ejecuci√≥n del hilo, provocando que se lance una excepci√≥n `InterruptedException`.                                                                                                   |
| `boolean interrupted()`       | Verifica si un hilo ha sido interrumpido.                                                                                                                                                         |
| `Thread.currentThread()`      | M√©todo est√°tico de la clase `Thread` que devuelve una referencia al hilo que est√° ejecutando el c√≥digo.                                                                                           |
| `boolean isDaemon()`          | Verifica si un hilo es un servicio/daemon. Un hilo de baja prioridad que se ejecuta independientemente de su proceso principal. Un proceso puede terminar incluso si un hilo daemon sigue activo. |
| `setDaemon(boolean on)`       | Convierte un hilo en un daemon/servicio. Por defecto, todos los hilos son creados como hilos de usuario.                                                                                          |
| `int activeCount()`           | Devuelve el n√∫mero de hilos pertenecientes a un grupo que a√∫n est√°n activos.                                                                                                                      |
| `Thread.State getState()`     | Devuelve el estado actual del hilo. Los posibles valores son: `NEW`, `RUNNABLE`, `BLOCKED`, `WAITING`, `TIMED_WAITING` o `TERMINATED`.                                                            |
